import{A as R,_ as D}from"./index.a02afe75.js";import{t as V}from"./index.e58ad9f7.js";/* empty css               */import{d as F,e as i,n as H,E as o,aG as v,aJ as m,aK as h,bT as K,bS as E,i as A,w as $,I as a,u as C,F as y,aM as I,aL as j,G as z,aP as b,aO as G,aH as J,x as L,bw as M,bp as O,bR as P}from"./arco.ba71ebb9.js";/* empty css              */import{u as q}from"./loading.069aae80.js";const Q=F({__name:"user-search",emits:["keywordInput"],setup(k,{emit:r}){const s=i();function n(t){r("keywordInput",t)}const l=t=>{t.target.setAttribute("readonly",!0),setTimeout(()=>{t.target.removeAttribute("readonly")},100)};return H(()=>{s.value&&s.value.focus()}),(t,g)=>{const d=K,c=E;return o(),v(c,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"15px"}},{default:m(()=>[h(d,{ref_key:"keywordRef",ref:s,placeholder:"\u641C\u7D22\u624B\u673A\u53F7/\u6635\u79F0\u6216\u70B9\u51FB\u805A\u7126\u626B\u7801","allow-clear":"",onChange:n,onFocus:l},null,512)]),_:1})}}}),W={class:"list-box"},X=["onClick"],Y=["src"],Z={class:"info"},ee={class:"nickname"},te={class:"cellphone"},se={class:"bottom"},ae={class:"price"},oe={key:0,class:"loading"},ne=F({__name:"user-list",props:{keyword:{default:""}},setup(k){const r=k,s=i();let n=1;const l=i(!1),{loading:t,setLoading:g}=q(),d=i(),c=i(),{updateUser:B}=A("user"),S=A("isDefaultUser");async function w(e=!1){var x,p,f;try{e?l.value=!0:g(!0);const{data:_}=await R({keyword:s.value,page:n});e?(x=c.value)==null||x.push(..._):c.value=_,n+=1,S&&(d.value=(p=L(c.value))==null?void 0:p[0].id,B((f=L(c.value))==null?void 0:f[0]))}catch{}finally{l.value=!1,g(!1)}}function U(e){d.value=e.id,B(e)}function T(e){e.srcElement.scrollTop+e.srcElement.clientHeight>=e.srcElement.scrollHeight&&w(!0)}return w(),$(()=>r.keyword,e=>{s.value=e,w()}),(e,x)=>{const p=M,f=O,_=P;return o(),v(_,{style:{overflow:"auto"},onScroll:T},{default:m(()=>[a("div",W,[C(t)?(o(),v(p,{key:0,style:{height:"100%",display:"flex","align-items":"center","justify-content":"center"}})):(o(),y(I,{key:1},[(o(!0),y(I,null,j(c.value,(u,N)=>(o(),y("div",{key:N,class:z(["item",{on:u.id===d.value}]),onClick:le=>U(u)},[h(f,{size:58},{default:m(()=>[a("img",{alt:"avatar",src:u.portrait},null,8,Y)]),_:2},1024),a("div",Z,[a("div",ee,b(u.nickname),1),a("div",te,"\u624B\u673A\u53F7\uFF1A"+b(u.cellphone),1),a("div",se,[a("div",ae,[G("\u4F59\u989D\uFF1A"),a("span",null,b(C(V)(String(u.money))),1)])])])],10,X))),128)),l.value?(o(),y("div",oe,"\u52A0\u8F7D\u4E2D...")):J("",!0)],64))])]),_:1})}}});const ce=D(ne,[["__scopeId","data-v-0c0167e7"]]),re=F({__name:"user",setup(k){const r=i(),s=n=>{r.value=n};return(n,l)=>{const t=E;return o(),v(t,{class:"general-card cart-box","header-style":{paddingBottom:"0"},"body-style":{padding:"0 0"}},{default:m(()=>[h(Q,{onKeywordInput:s}),h(ce,{keyword:r.value},null,8,["keyword"])]),_:1})}}});const ye=D(re,[["__scopeId","data-v-ffc31932"]]);export{ye as U};
