import{A as T,_ as D}from"./index.cd0517d3.js";import{t as V}from"./index.e58ad9f7.js";/* empty css               */import{d as b,e as l,n as H,E as a,aG as m,aJ as h,aK as k,bT as $,bS as E,i as C,w as j,I as t,u as I,F as v,aM as L,aL as z,G,aP as F,aO as K,aH as J,x as A,bw as M,bp as O,bR as P}from"./arco.ba71ebb9.js";/* empty css              */import{u as q}from"./loading.069aae80.js";const Q=b({__name:"user-search",emits:["keywordInput"],setup(g,{emit:c}){const s=l();function o(n){c("keywordInput",n)}return H(()=>{s.value&&s.value.focus()}),(n,d)=>{const p=$,u=E;return a(),m(u,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"15px"}},{default:h(()=>[k(p,{ref_key:"keywordRef",ref:s,placeholder:"\u641C\u7D22\u624B\u673A\u53F7/\u6635\u79F0\u6216\u70B9\u51FB\u805A\u7126\u626B\u7801","allow-clear":"",onChange:o},null,512)]),_:1})}}}),W={class:"list-box"},X=["onClick"],Y=["src"],Z={class:"info"},ee={class:"nickname"},se={class:"cellphone"},te={class:"bottom"},ae={class:"price"},oe={key:0,class:"loading"},ne=b({__name:"user-list",props:{keyword:{default:""}},setup(g){const c=g,s=l();let o=1;const n=l(!1),{loading:d,setLoading:p}=q(),u=l(),i=l(),{updateUser:B}=C("user"),S=C("isDefaultUser");async function w(e=!1){var x,f,y;try{e?n.value=!0:p(!0);const{data:_}=await T({keyword:s.value,page:o});e?(x=i.value)==null||x.push(..._):i.value=_,o+=1,S&&(u.value=(f=A(i.value))==null?void 0:f[0].id,B((y=A(i.value))==null?void 0:y[0]))}catch{}finally{n.value=!1,p(!1)}}function U(e){u.value=e.id,B(e)}function N(e){e.srcElement.scrollTop+e.srcElement.clientHeight>=e.srcElement.scrollHeight&&w(!0)}return w(),j(()=>c.keyword,e=>{s.value=e,w()}),(e,x)=>{const f=M,y=O,_=P;return a(),m(_,{style:{overflow:"auto"},onScroll:N},{default:h(()=>[t("div",W,[I(d)?(a(),m(f,{key:0,style:{height:"100%",display:"flex","align-items":"center","justify-content":"center"}})):(a(),v(L,{key:1},[(a(!0),v(L,null,z(i.value,(r,R)=>(a(),v("div",{key:R,class:G(["item",{on:r.id===u.value}]),onClick:le=>U(r)},[k(y,{size:58},{default:h(()=>[t("img",{alt:"avatar",src:r.portrait},null,8,Y)]),_:2},1024),t("div",Z,[t("div",ee,F(r.nickname),1),t("div",se,"\u624B\u673A\u53F7\uFF1A"+F(r.cellphone),1),t("div",te,[t("div",ae,[K("\u4F59\u989D\uFF1A"),t("span",null,F(I(V)(String(r.money))),1)])])])],10,X))),128)),n.value?(a(),v("div",oe,"\u52A0\u8F7D\u4E2D...")):J("",!0)],64))])]),_:1})}}});const ce=D(ne,[["__scopeId","data-v-0c0167e7"]]),re=b({__name:"user",setup(g){const c=l(),s=o=>{c.value=o};return(o,n)=>{const d=E;return a(),m(d,{class:"general-card cart-box","header-style":{paddingBottom:"0"},"body-style":{padding:"0 0"}},{default:h(()=>[k(Q,{onKeywordInput:s}),k(ce,{keyword:c.value},null,8,["keyword"])]),_:1})}}});const ye=D(re,[["__scopeId","data-v-ffc31932"]]);export{ye as U};
